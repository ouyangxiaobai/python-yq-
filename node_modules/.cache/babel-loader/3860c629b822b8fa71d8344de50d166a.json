{"remainingRequest":"D:\\共享文件\\code space\\疫情统计分析软件\\22\\epidemicmanagementweb\\node_modules\\babel-loader\\lib\\index.js!D:\\共享文件\\code space\\疫情统计分析软件\\22\\epidemicmanagementweb\\src\\directive\\permission.js","dependencies":[{"path":"D:\\共享文件\\code space\\疫情统计分析软件\\22\\epidemicmanagementweb\\src\\directive\\permission.js","mtime":1652251439000},{"path":"D:\\共享文件\\code space\\疫情统计分析软件\\22\\epidemicmanagementweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\共享文件\\code space\\疫情统计分析软件\\22\\epidemicmanagementweb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwovLyDlsIHoo4XkuIDkuKrmjIfku6R2LXBlcm1pc3Npb24s5LuO6ICM5a6e546w5oyJ6ZKu57qn5Yir5p2D6ZmQ5o6n5Yi2CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKLyoqCiAqIOaMh+S7pOeahOS9v+eUqAogKiB2LXBlcm1pc3Npb249IlsnYWRtaW4nLCdlZGl0b3InXSIKICogCiovCgp2YXIgcGVybWlzc2lvbiA9IHsKICBpbnNlcnRlZDogZnVuY3Rpb24gaW5zZXJ0ZWQoZWwsIGJpbmRpbmcpIHsKICAgIC8qKgogICAgICogZWwg5b2T5YmN5oyH5Luk55qE5YWD57SgICAKICAgICAqIGJpbmRpbmcge25hbWUsZXhwcmVzc2lvbix2YWxlfeetiQogICAgICogKi8KICAgIC8vIOiOt+WPluaMh+S7pOeahOWAvDog5oyJ6ZKu6KaB5rGC55qE6KeS6Imy5pWw57uECiAgICB2YXIgcFJvbGVzID0gYmluZGluZy52YWx1ZTsgLy8gIOiOt+WPlueUqOaIt+inkuiJsgoKICAgIHZhciByb2xlcyA9IHN0b3JlLmdldHRlcnMgJiYgc3RvcmUuZ2V0dGVycy5yb2xlczsKCiAgICBpZiAocFJvbGVzICYmIHBSb2xlcyBpbnN0YW5jZW9mIEFycmF5ICYmIHBSb2xlcy5sZW5ndGggPiAwKSB7CiAgICAgIC8vIOWIpOaWreeUqOaIt+inkuiJsuS4reaYr+WQpuacieaMiemSruimgeaxgueahOinkuiJsgogICAgICB2YXIgaGFzUGVybWlzc2lvbiA9IHJvbGVzLnNvbWUoZnVuY3Rpb24gKHJvbGUpIHsKICAgICAgICByZXR1cm4gcFJvbGVzLmluY2x1ZGVzKHJvbGUpOwogICAgICB9KTsgLy8gY29uc29sZS5sb2coaGFzUGVybWlzc2lvbikKICAgICAgLy8g5aaC5p6c5rKh5pyJ5p2D6ZmQ5YiZ5Yig6Zmk5b2T5YmNRE9NCgogICAgICBpZiAoIWhhc1Blcm1pc3Npb24pIHsKICAgICAgICBlbC5wYXJlbnROb2RlICYmIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIlx1OTcwMFx1ODk4MVx1NjMwN1x1NUI5QVx1NjMwOVx1OTRBRVx1ODk4MVx1NkM0Mlx1ODlEMlx1ODI3Mlx1NjU3MFx1N0VDNCxcdTU5ODJ2LXBlcm1pc3Npb249XCJbJ2FkbWluJywnZWRpdG9yJ11cIiIpOwogICAgfQogIH0KfTsKZXhwb3J0IGRlZmF1bHQgcGVybWlzc2lvbjsKLyoqCiAqIOWFqOWxgOazqOWGjOaMh+S7pAogKiBpbXBvcnQgdlBlcm1pc3Npb24gZnJvbSAnLi9kaXJlY3RpdmUvcGVybWlzc2lvbicKICogVnVlLmRpcmVjdGl2ZSgncGVybWlzc2lvbicsdlBlcm1pc3Npb24pCiAqIAogKiDkvb/nlKggPGJ1dHRvbiB2LXBlcm1pc3Npb249IlsnYWRtaW4nXSI+YWRtaW48L2J1dHRvbj4KICogCiAqICov"},{"version":3,"sources":["D:/共享文件/code space/疫情统计分析软件/22/epidemicmanagementweb/src/directive/permission.js"],"names":["store","permission","inserted","el","binding","pRoles","value","roles","getters","Array","length","hasPermission","some","role","includes","parentNode","removeChild","Error"],"mappings":";;AAAA;AACA,OAAOA,KAAP,MAAkB,SAAlB;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMC,UAAU,GAAG;AACfC,EAAAA,QADe,oBACNC,EADM,EACFC,OADE,EACM;AACjB;AACR;AACA;AACA;AACQ;AACA,QAAeC,MAAf,GAA0BD,OAA1B,CAAQE,KAAR,CANiB,CAOjB;;AACA,QAAMC,KAAK,GAAGP,KAAK,CAACQ,OAAN,IAAiBR,KAAK,CAACQ,OAAN,CAAcD,KAA7C;;AAEA,QAAGF,MAAM,IAAIA,MAAM,YAAYI,KAA5B,IAAqCJ,MAAM,CAACK,MAAP,GAAe,CAAvD,EAA0D;AACtD;AACA,UAAMC,aAAa,GAAGJ,KAAK,CAACK,IAAN,CAAW,UAAAC,IAAI,EAAI;AACrC,eAAOR,MAAM,CAACS,QAAP,CAAgBD,IAAhB,CAAP;AACH,OAFqB,CAAtB,CAFsD,CAKtD;AACA;;AACA,UAAG,CAACF,aAAJ,EAAkB;AACdR,QAAAA,EAAE,CAACY,UAAH,IAAiBZ,EAAE,CAACY,UAAH,CAAcC,WAAd,CAA0Bb,EAA1B,CAAjB;AACH;AACJ,KAVD,MAUK;AACD,YAAM,IAAIc,KAAJ,sHAAN;AACH;AACJ;AAxBc,CAAnB;AA2BA,eAAehB,UAAf;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["// 封装一个指令v-permission,从而实现按钮级别权限控制\nimport store from '@/store'\n/**\n * 指令的使用\n * v-permission=\"['admin','editor']\"\n * \n*/\nconst permission = {\n    inserted(el, binding){ \n        /**\n         * el 当前指令的元素  \n         * binding {name,expression,vale}等\n         * */ \n        // 获取指令的值: 按钮要求的角色数组\n        const { value: pRoles } = binding;\n        //  获取用户角色\n        const roles = store.getters && store.getters.roles\n\n        if(pRoles && pRoles instanceof Array && pRoles.length >0 ){\n            // 判断用户角色中是否有按钮要求的角色\n            const hasPermission = roles.some(role => {\n                return pRoles.includes(role);\n            })\n            // console.log(hasPermission)\n            // 如果没有权限则删除当前DOM\n            if(!hasPermission){\n                el.parentNode && el.parentNode.removeChild(el);\n            }\n        }else{\n            throw new Error(`需要指定按钮要求角色数组,如v-permission=\"['admin','editor']\"`)\n        }\n    }\n}\n\nexport default permission;\n\n\n/**\n * 全局注册指令\n * import vPermission from './directive/permission'\n * Vue.directive('permission',vPermission)\n * \n * 使用 <button v-permission=\"['admin']\">admin</button>\n * \n * */ "]}]}